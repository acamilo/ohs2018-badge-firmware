language: generic
branches:
  only:
  - master

sudo: required

if: tag IS present

addons:
  apt:
    packages:
       - wget
       - make
       - libncurses-dev
       - flex
       - bison
       - gperf
       - python
       - python-serial
       - build-essential
       - libreadline-dev
       - libffi-dev
       - pkg-config

script: bash scripts/build.sh


deploy:
  branches:
    only:
      - /(\d+\.)?(\d+\.)?(\*|\d+)$/
  provider: script
  skip_cleanup: true
  script: bash scripts/deploy.sh
